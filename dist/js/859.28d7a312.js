"use strict";(self["webpackChunkfitmind_frontend"]=self["webpackChunkfitmind_frontend"]||[]).push([[859],{6859:function(e,s,a){a.r(s),a.d(s,{default:function(){return H}});a(8111),a(2489);var l=a(6768),t=a(4232),n=a(5130);const i={class:"dashboard-wrapper"},o={class:"top-nav"},r={class:"nav-container"},c={class:"nav-actions"},d={class:"main-layout"},u={class:"sidebar-header"},k={class:"goals-list"},p={key:0,class:"user-goals"},h={class:"goal-badge"},L={class:"goal-weight"},v={key:1,class:"no-goals"},g={key:0,class:"empty-state"},m={class:"content-area"},b={class:"dashboard-content"},f={class:"welcome-section"},U={class:"welcome-text"},C={class:"stats-grid"},P={class:"stat-card users-card"},y={class:"stat-card plans-card"},E={class:"meal-plan-section"},I={class:"meal-plan-card"},_={class:"form-group"},X=["value"],N={key:0,class:"meal-plan-form"},O={key:0,class:"selected-user-info"},W={class:"user-badge"},w={class:"user-avatar"},A={class:"user-name"},M={key:0,class:"user-goals-inline"},S={key:1,class:"no-goals-text"},F={class:"form-group"},T={key:1,class:"select-user-prompt"},x={class:"logout-section"};function D(e,s,a,D,K,z){const G=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("header",o,[(0,l.Lk)("div",r,[s[13]||(s[13]=(0,l.Lk)("div",{class:"logo-section"},[(0,l.Lk)("div",{class:"avatar"}),(0,l.Lk)("span",{class:"brand-name"},"Fit&Mind")],-1)),(0,l.Lk)("nav",{class:(0,t.C4)(["nav-links",{"mobile-open":K.mobileMenuOpen}])},[(0,l.bF)(G,{to:"/",class:"nav-link"},{default:(0,l.k6)(()=>[...s[9]||(s[9]=[(0,l.eW)("HOME",-1)])]),_:1}),(0,l.bF)(G,{to:"/nutritionist/dashboard",class:"nav-link active"},{default:(0,l.k6)(()=>[...s[10]||(s[10]=[(0,l.eW)("DASHBOARD",-1)])]),_:1}),(0,l.bF)(G,{to:"/contact",class:"nav-link"},{default:(0,l.k6)(()=>[...s[11]||(s[11]=[(0,l.eW)("CONTACT",-1)])]),_:1})],2),(0,l.Lk)("div",c,[s[12]||(s[12]=(0,l.Lk)("input",{type:"search",placeholder:"Search...",class:"search-input"},null,-1)),(0,l.Lk)("button",{class:"mobile-menu-btn",onClick:s[0]||(s[0]=e=>K.mobileMenuOpen=!K.mobileMenuOpen)},"â˜°")])])]),(0,l.Lk)("div",d,[(0,l.Lk)("aside",{class:(0,t.C4)(["sidebar",{"mobile-open":K.sidebarOpen}])},[(0,l.Lk)("div",u,[s[14]||(s[14]=(0,l.Lk)("h3",null,"USERS & GOALS",-1)),(0,l.Lk)("button",{class:"refresh-btn",onClick:s[1]||(s[1]=(...e)=>z.fetchUsers&&z.fetchUsers(...e)),title:"Refresh users"},"ðŸ”„"),(0,l.Lk)("button",{class:"close-sidebar",onClick:s[2]||(s[2]=e=>K.sidebarOpen=!1)},"âœ•")]),(0,l.Lk)("div",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(K.users,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:(0,t.C4)(["goal-item",{selected:e.id===K.selectedUserId}])},[(0,l.Lk)("div",null,[(0,l.Lk)("strong",null,(0,t.v_)(e.name),1),e.goals&&e.goals.length>0?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.goals,e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id},[(0,l.Lk)("span",h,(0,t.v_)(e.goalType),1),(0,l.Lk)("span",L,(0,t.v_)(e.targetWeight)+"kg",1)]))),128))])])):((0,l.uX)(),(0,l.CE)("div",v,[...s[15]||(s[15]=[(0,l.Lk)("em",null,"No goals set",-1)])]))])],2))),128)),0===K.users.length?((0,l.uX)(),(0,l.CE)("div",g,[...s[16]||(s[16]=[(0,l.Lk)("span",{class:"empty-icon"},"ðŸ‘¥",-1),(0,l.Lk)("p",null,"No users found",-1)])])):(0,l.Q3)("",!0)])],2),(0,l.Lk)("main",m,[(0,l.Lk)("button",{class:"mobile-sidebar-toggle",onClick:s[3]||(s[3]=e=>K.sidebarOpen=!0)},[...s[17]||(s[17]=[(0,l.Lk)("span",null,"â˜°",-1),(0,l.eW)(" Users & Goals ",-1)])]),(0,l.Lk)("div",b,[(0,l.Lk)("div",f,[s[20]||(s[20]=(0,l.Lk)("h1",null,"Nutritionist Dashboard",-1)),(0,l.Lk)("p",U,[s[18]||(s[18]=(0,l.eW)("Welcome back, ",-1)),(0,l.Lk)("strong",null,(0,t.v_)(K.user.name),1),s[19]||(s[19]=(0,l.eW)("! ðŸ¥—",-1))])]),(0,l.Lk)("div",C,[(0,l.Lk)("div",P,[s[21]||(s[21]=(0,l.Lk)("div",{class:"stat-icon"},"ðŸ‘¥",-1)),(0,l.Lk)("h3",null,(0,t.v_)(K.users.length),1),s[22]||(s[22]=(0,l.Lk)("p",null,"Total Users",-1))]),(0,l.Lk)("div",y,[s[23]||(s[23]=(0,l.Lk)("div",{class:"stat-icon"},"ðŸ“‹",-1)),(0,l.Lk)("h3",null,(0,t.v_)(K.users.filter(e=>e.goals&&e.goals.length>0).length),1),s[24]||(s[24]=(0,l.Lk)("p",null,"Active Plans",-1))])]),(0,l.Lk)("div",E,[s[30]||(s[30]=(0,l.Lk)("div",{class:"section-header"},[(0,l.Lk)("h2",null,"ðŸ“ Create Nutrition Plan"),(0,l.Lk)("p",null,"Select a user and create their personalized meal plan")],-1)),(0,l.Lk)("div",I,[(0,l.Lk)("div",_,[s[26]||(s[26]=(0,l.Lk)("label",{for:"selectUser"},[(0,l.Lk)("span",{class:"label-icon"},"ðŸ‘¤"),(0,l.eW)(" Select User ")],-1)),(0,l.bo)((0,l.Lk)("select",{id:"selectUser","onUpdate:modelValue":s[4]||(s[4]=e=>K.selectedUserId=e),onChange:s[5]||(s[5]=(...e)=>z.loadMealPlan&&z.loadMealPlan(...e)),class:"user-select"},[s[25]||(s[25]=(0,l.Lk)("option",{value:""},"-- Choose a user --",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(K.users,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,t.v_)(e.name),9,X))),128))],544),[[n.u1,K.selectedUserId]])]),K.selectedUserId?((0,l.uX)(),(0,l.CE)("div",N,[z.selectedUser?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("div",W,[(0,l.Lk)("div",w,(0,t.v_)(z.selectedUser.name.charAt(0)),1),(0,l.Lk)("div",null,[(0,l.Lk)("p",A,(0,t.v_)(z.selectedUser.name),1),z.selectedUser.goals&&z.selectedUser.goals.length>0?((0,l.uX)(),(0,l.CE)("div",M,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(z.selectedUser.goals,e=>((0,l.uX)(),(0,l.CE)("span",{key:e.id,class:"goal-tag"},(0,t.v_)(e.goalType)+" â€¢ "+(0,t.v_)(e.targetWeight)+"kg ",1))),128))])):((0,l.uX)(),(0,l.CE)("p",S,"No goals set"))])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",F,[s[27]||(s[27]=(0,l.Lk)("label",{for:"nutritionPlan"},[(0,l.Lk)("span",{class:"label-icon"},"ðŸ¥—"),(0,l.eW)(" Nutrition Plan ")],-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"nutritionPlan","onUpdate:modelValue":s[6]||(s[6]=e=>K.nutritionPlanLocal=e),class:"nutrition-textarea",placeholder:"Enter personalized nutrition plan..."},null,512),[[n.Jo,K.nutritionPlanLocal]])]),(0,l.Lk)("button",{onClick:s[7]||(s[7]=(...e)=>z.saveNutritionPlan&&z.saveNutritionPlan(...e)),class:"btn-primary"},[...s[28]||(s[28]=[(0,l.Lk)("span",{class:"btn-icon"},"ðŸ’¾",-1),(0,l.eW)(" Save Nutrition Plan ",-1)])])])):((0,l.uX)(),(0,l.CE)("div",T,[...s[29]||(s[29]=[(0,l.Lk)("div",{class:"prompt-icon"},"ðŸ‘†",-1),(0,l.Lk)("p",null,"Please select a user above to create or edit their nutrition plan",-1)])]))])]),(0,l.Lk)("div",x,[(0,l.Lk)("button",{onClick:s[8]||(s[8]=(...e)=>z.logout&&z.logout(...e)),class:"logout-btn"},[...s[31]||(s[31]=[(0,l.Lk)("span",null,"ðŸšª",-1),(0,l.eW)(" Logout ",-1)])])])])])])])}a(4114),a(116),a(9112);var K=a(4373),z={name:"NutritionistDashboard",data(){const e=JSON.parse(localStorage.getItem("user")||"{}");return{user:e,mobileMenuOpen:!1,sidebarOpen:!1,users:[],selectedUserId:"",nutritionPlanLocal:""}},computed:{selectedUser(){return this.selectedUserId?this.users.find(e=>e.id===this.selectedUserId):null}},mounted(){this.fetchUsers()},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),delete K.A.defaults.headers.common["Authorization"],this.$router.push("/")},async fetchUsers(){try{const e=await K.A.get("/nutritionist/users-goals");this.users=e.data||[],this.users.length>0&&!this.selectedUserId&&(this.selectedUserId=this.users[0].id,await this.loadMealPlan()),this.selectedUserId&&this.users.find(e=>e.id===this.selectedUserId)&&await this.loadMealPlan()}catch(e){console.error("Error fetching users:",e),alert("Failed to load users: "+(e.response?.data?.message||e.message))}},async loadMealPlan(){if(this.selectedUserId)try{const e=await K.A.get(`/meal-plans/user/${this.selectedUserId}`);e.data.meal_plans&&e.data.meal_plans.length>0?this.nutritionPlanLocal=e.data.meal_plans[0].notes||"":this.nutritionPlanLocal=""}catch(e){console.error("Error loading meal plan:",e),this.nutritionPlanLocal=""}else this.nutritionPlanLocal=""},async saveNutritionPlan(){if(this.selectedUserId)if(this.nutritionPlanLocal&&""!==this.nutritionPlanLocal.trim())try{await K.A.post("/meal-plans",{user_id:this.selectedUserId,notes:this.nutritionPlanLocal,goal_type:"General"}),alert("âœ… Nutrition plan saved successfully!"),await this.loadMealPlan()}catch(e){console.error("Error saving meal plan:",e),alert("Failed to save meal plan: "+(e.response?.data?.message||e.message))}else alert("Please enter a nutrition plan!");else alert("Please select a user first!")}}},G=a(1241);const R=(0,G.A)(z,[["render",D],["__scopeId","data-v-61c738aa"]]);var H=R}}]);
//# sourceMappingURL=859.28d7a312.js.map