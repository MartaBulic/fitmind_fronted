"use strict";(self["webpackChunkfitmind_frontend"]=self["webpackChunkfitmind_frontend"]||[]).push([[718],{7718:function(e,s,a){a.r(s),a.d(s,{default:function(){return V}});a(8111),a(2489);var l=a(6768),t=a(4232),n=a(5130),i=a(3153);const o={class:"app-container"},r={class:"top-nav"},c={class:"nav-container"},d={class:"nav-actions"},u={class:"dashboard-wrapper"},k={class:"main-layout"},L={class:"sidebar-header"},p={class:"goals-list"},g={key:0,class:"user-goals"},v={class:"goal-badge"},h={class:"goal-weight"},m={key:1,class:"no-goals"},b={key:0,class:"empty-state"},f={class:"content-area"},C={class:"dashboard-content"},U={class:"welcome-section"},P={class:"stats-grid"},y={class:"stat-card users-card"},_={class:"stat-card plans-card"},E={class:"meal-plan-section"},I={class:"meal-plan-card"},M={class:"form-group"},X=["value"],W={key:0,class:"meal-plan-form"},N={key:0,class:"selected-user-info"},F={class:"user-badge"},O={class:"user-avatar"},w={class:"user-name"},A={key:0,class:"user-goals-inline"},S={key:1,class:"no-goals-text"},T={class:"form-group"},K={key:0,class:"success-message"},x={key:1,class:"select-user-prompt"},G={class:"logout-section"};function Q(e,s,a,Q,z,D){const J=(0,l.g2)("router-link"),R=(0,l.g2)("center");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("header",r,[(0,l.Lk)("div",c,[s[11]||(s[11]=(0,l.Lk)("div",{class:"logo-section"},[(0,l.Lk)("div",{class:"brand-logo"},[(0,l.Lk)("img",{src:i,alt:"Fit&Mind Logo"})]),(0,l.Lk)("span",{class:"brand-name"},"Fit&Mind")],-1)),(0,l.Lk)("nav",{class:(0,t.C4)(["nav-links",{"mobile-open":z.mobileMenuOpen}])},[(0,l.bF)(J,{to:"/",class:"nav-link"},{default:(0,l.k6)(()=>[...s[8]||(s[8]=[(0,l.eW)("HOME",-1)])]),_:1}),(0,l.bF)(J,{to:"/dashboard",class:"nav-link"},{default:(0,l.k6)(()=>[...s[9]||(s[9]=[(0,l.eW)("PROFILE",-1)])]),_:1}),(0,l.bF)(J,{to:"/contact",class:"nav-link"},{default:(0,l.k6)(()=>[...s[10]||(s[10]=[(0,l.eW)("CONTACT",-1)])]),_:1})],2),(0,l.Lk)("div",d,[(0,l.Lk)("button",{class:"mobile-menu-btn",onClick:s[0]||(s[0]=e=>z.mobileMenuOpen=!z.mobileMenuOpen)},"â˜°")])])]),(0,l.Lk)("div",u,[(0,l.Lk)("div",k,[(0,l.Lk)("aside",{class:(0,t.C4)(["sidebar",{"mobile-open":z.sidebarOpen}])},[(0,l.Lk)("div",L,[s[12]||(s[12]=(0,l.Lk)("h3",null,"USERS & GOALS",-1)),(0,l.Lk)("button",{class:"close-sidebar",onClick:s[1]||(s[1]=e=>z.sidebarOpen=!1)},"âœ•")]),(0,l.Lk)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(z.users,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:(0,t.C4)(["goal-item",{selected:e.id===z.selectedUserId}])},[(0,l.Lk)("div",null,[(0,l.Lk)("strong",null,(0,t.v_)(e.name),1),e.goals&&e.goals.length>0?((0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.goals,e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id},[(0,l.Lk)("span",v,(0,t.v_)(e.goalType),1),(0,l.Lk)("span",h,(0,t.v_)(e.targetWeight)+"kg",1)]))),128))])])):((0,l.uX)(),(0,l.CE)("div",m,[...s[13]||(s[13]=[(0,l.Lk)("em",null,"No goals set",-1)])]))])],2))),128)),0===z.users.length?((0,l.uX)(),(0,l.CE)("div",b,[...s[14]||(s[14]=[(0,l.Lk)("span",{class:"empty-icon"},"ðŸ‘¥",-1),(0,l.Lk)("p",null,"No users found",-1)])])):(0,l.Q3)("",!0)])],2),(0,l.Lk)("main",f,[(0,l.Lk)("button",{class:"mobile-sidebar-toggle",onClick:s[2]||(s[2]=e=>z.sidebarOpen=!0)},[...s[15]||(s[15]=[(0,l.Lk)("span",null,"â˜°",-1),(0,l.eW)(" Users & Goals ",-1)])]),(0,l.Lk)("div",C,[(0,l.Lk)("div",U,[s[18]||(s[18]=(0,l.Lk)("div",{class:"header-icon"},"ðŸ¥—",-1)),s[19]||(s[19]=(0,l.Lk)("h1",null,"Nutritionist Dashboard",-1)),(0,l.bF)(R,null,{default:(0,l.k6)(()=>[(0,l.Lk)("p",null,[s[16]||(s[16]=(0,l.eW)("Welcome back, ",-1)),(0,l.Lk)("strong",null,(0,t.v_)(z.user.name),1),s[17]||(s[17]=(0,l.eW)("! Manage your clients' nutrition plans.",-1))])]),_:1})]),(0,l.Lk)("div",P,[(0,l.Lk)("div",y,[s[20]||(s[20]=(0,l.Lk)("div",{class:"stat-icon"},"ðŸ‘¥",-1)),(0,l.Lk)("h3",null,(0,t.v_)(z.users.length),1),s[21]||(s[21]=(0,l.Lk)("p",null,"Total Users",-1))]),(0,l.Lk)("div",_,[s[22]||(s[22]=(0,l.Lk)("div",{class:"stat-icon"},"ðŸ“‹",-1)),(0,l.Lk)("h3",null,(0,t.v_)(z.users.filter(e=>e.goals&&e.goals.length>0).length),1),s[23]||(s[23]=(0,l.Lk)("p",null,"Active Plans",-1))])]),(0,l.Lk)("div",E,[s[30]||(s[30]=(0,l.Lk)("div",{class:"section-title"},[(0,l.Lk)("h2",null,"ðŸ“ Create Nutrition Plan")],-1)),(0,l.Lk)("div",I,[(0,l.Lk)("div",M,[s[25]||(s[25]=(0,l.Lk)("label",{for:"selectUser"},[(0,l.Lk)("span",{class:"label-icon"},"ðŸ‘¤"),(0,l.eW)(" Select User ")],-1)),(0,l.bo)((0,l.Lk)("select",{id:"selectUser","onUpdate:modelValue":s[3]||(s[3]=e=>z.selectedUserId=e),onChange:s[4]||(s[4]=(...e)=>D.loadMealPlan&&D.loadMealPlan(...e)),class:"user-select"},[s[24]||(s[24]=(0,l.Lk)("option",{value:""},"-- Choose a user --",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(z.users,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,t.v_)(e.name),9,X))),128))],544),[[n.u1,z.selectedUserId]])]),z.selectedUserId?((0,l.uX)(),(0,l.CE)("div",W,[D.selectedUser?((0,l.uX)(),(0,l.CE)("div",N,[(0,l.Lk)("div",F,[(0,l.Lk)("div",O,(0,t.v_)(D.selectedUser.name.charAt(0)),1),(0,l.Lk)("div",null,[(0,l.Lk)("p",w,(0,t.v_)(D.selectedUser.name),1),D.selectedUser.goals&&D.selectedUser.goals.length>0?((0,l.uX)(),(0,l.CE)("div",A,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(D.selectedUser.goals,e=>((0,l.uX)(),(0,l.CE)("span",{key:e.id,class:"goal-tag"},(0,t.v_)(e.goalType)+" â€¢ "+(0,t.v_)(e.targetWeight)+"kg ",1))),128))])):((0,l.uX)(),(0,l.CE)("p",S,"No goals set"))])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",T,[s[26]||(s[26]=(0,l.Lk)("label",{for:"nutritionPlan"},[(0,l.Lk)("span",{class:"label-icon"},"ðŸ¥—"),(0,l.eW)(" Nutrition Plan ")],-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"nutritionPlan","onUpdate:modelValue":s[5]||(s[5]=e=>z.nutritionPlanLocal=e),class:"nutrition-textarea",placeholder:"Enter personalized nutrition plan..."},null,512),[[n.Jo,z.nutritionPlanLocal]])]),(0,l.Lk)("button",{onClick:s[6]||(s[6]=(...e)=>D.saveNutritionPlan&&D.saveNutritionPlan(...e)),class:"submit-btn"},[...s[27]||(s[27]=[(0,l.Lk)("span",{class:"btn-icon"},"ðŸ’¾",-1),(0,l.eW)(" Save Nutrition Plan ",-1)])]),(0,l.bF)(n.eB,{name:"fade"},{default:(0,l.k6)(()=>[z.successMessage?((0,l.uX)(),(0,l.CE)("div",K,[s[28]||(s[28]=(0,l.Lk)("span",{class:"success-icon"},"âœ…",-1)),(0,l.eW)((0,t.v_)(z.successMessage),1)])):(0,l.Q3)("",!0)]),_:1})])):((0,l.uX)(),(0,l.CE)("div",x,[...s[29]||(s[29]=[(0,l.Lk)("div",{class:"prompt-icon"},"ðŸ‘†",-1),(0,l.Lk)("p",null,"Please select a user above to create or edit their nutrition plan",-1)])]))])]),(0,l.Lk)("div",G,[(0,l.Lk)("button",{onClick:s[7]||(s[7]=(...e)=>D.logout&&D.logout(...e)),class:"logout-btn"},[...s[31]||(s[31]=[(0,l.Lk)("span",null,"ðŸšª",-1),(0,l.eW)(" Logout ",-1)])])])])])])])])}a(4114),a(116),a(9112);var z=a(4373),D={name:"NutritionistDashboard",data(){const e=JSON.parse(localStorage.getItem("user")||"{}");return{user:e,mobileMenuOpen:!1,sidebarOpen:!1,users:[],selectedUserId:"",nutritionPlanLocal:"",successMessage:""}},computed:{selectedUser(){return this.selectedUserId?this.users.find(e=>e.id===this.selectedUserId):null}},mounted(){this.fetchUsers()},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),delete z.A.defaults.headers.common["Authorization"],this.$router.push("/")},async fetchUsers(){try{const e=await z.A.get("/nutritionist/users-goals");this.users=e.data||[],this.users.length>0&&!this.selectedUserId&&(this.selectedUserId=this.users[0].id,await this.loadMealPlan()),this.selectedUserId&&this.users.find(e=>e.id===this.selectedUserId)&&await this.loadMealPlan()}catch(e){console.error("Error fetching users:",e)}},async loadMealPlan(){if(this.selectedUserId)try{const e=await z.A.get(`/meal-plans/user/${this.selectedUserId}`);e.data.meal_plans&&e.data.meal_plans.length>0?this.nutritionPlanLocal=e.data.meal_plans[0].notes||"":this.nutritionPlanLocal=""}catch(e){console.error("Error loading meal plan:",e),this.nutritionPlanLocal=""}else this.nutritionPlanLocal=""},async saveNutritionPlan(){if(this.selectedUserId)if(this.nutritionPlanLocal&&""!==this.nutritionPlanLocal.trim())try{await z.A.post("/meal-plans",{user_id:this.selectedUserId,notes:this.nutritionPlanLocal,goal_type:"General"}),this.successMessage="Nutrition plan saved successfully! We'll notify the client.",setTimeout(()=>this.successMessage="",5e3),await this.loadMealPlan()}catch(e){console.error("Error saving meal plan:",e),alert("Failed to save meal plan: "+(e.response?.data?.message||e.message))}else alert("Please enter a nutrition plan!");else alert("Please select a user first!")}}},J=a(1241);const R=(0,J.A)(D,[["render",Q],["__scopeId","data-v-72637284"]]);var V=R}}]);
//# sourceMappingURL=718.1330f800.js.map